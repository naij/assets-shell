define("app/exts",["magix","pat","jquery","app/models/manager","app/filters"],function(e){var t=e("magix"),a=e("pat"),n=e("jquery"),r=e("app/models/manager"),i=e("app/filters"),o=t.Router;t.View.merge({ctor:function(){this.$locker={},this.on("rendercall",function(){this.$locker={}})},param:function(e){return o.parse().params[e]||""},to:function(){return o.to.apply(o,arguments)},request:function(e){var t=this,a=new r;return t.capture(e||a.id,a,!0)},setView:function(e,r){var o,d=this,p=n.Deferred(),u=n("#"+d.id),f=u[0],m=d.data;return d.rendered?(m.__inject__||(n.extend(d.__pat.$data,d.data),d.data=d.__pat.$data),d.__pat.$apply(),r&&r(),p.resolve()):(d.beginUpdate(d.id),f&&(o={el:u[0],data:m,template:d.tmpl,dataCheckType:"dirtyCheck"},d.filters=d.filters||{},o.filters=n.extend(i,d.filters),n.each(d.filters,function(e,t){d.filters[e]=n.bind(t,d)}),d.__pat=new a(o),d.__pat.on("beforeDeleteBlock",function(e){n.each(e,function(e,t){1===t.nodeType&&d.owner.unmountZone&&d.owner.unmountZone(t)})}),d.__pat.on("beforeUpdateAttribute",function(e,a){if(/(mx-|data-)/.test(a))for(var n,r=0;r<e.length;r++)if(n=e[r],n.hasAttribute("mx-view")){var i=t.Vframe.get(n.id);i&&i.unmountView()}}),d.__pat.on("afterUpdateAttribute",function(e,a){if(/(mx-|data-)/.test(a))for(var n,r=0;r<e.length;r++)if(n=e[r],n.hasAttribute("mx-view")){var i=t.Vframe.get(n.id);i&&i.mountView(n.getAttribute("mx-view"))}}),d.__pat.on("afterAddBlock",function(e){n.each(e,function(e,t){1===t.nodeType&&(t.getAttribute("mx-vframe")?(t.id||(t.id="mx_n_"+(new Date).getTime()),d.owner.mountVframe(t.id,t.getAttribute("mx-view"))):d.owner.mountZone(t.id))})}),d.data=d.__pat.$data),d.endUpdate(d.id),e&&e.call(d),p.resolve(),d.on("destroy",function(){d.__pat&&d.__pat.$destroy()}),d.rendered=!0),p.promise()}})});